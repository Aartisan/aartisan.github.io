<!DOCTYPE html>
<html>
	<head>
		<!-- @Author: Ray -->
		<meta charset="utf-8" />
		<title>尾递归浅析 | Ray's Blog</title>
		<meta name="author" content="Ray" />
		<meta name="description" content="Ray's Blog" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">
		<link rel="stylesheet" href="/css/default.css" type="text/css" />
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
		<link rel="alternate" type="application/atom+xml" title="Recent Entries" href="" />
		<script src="/js/jquery-1.7.1.min.js" type="text/javascript"></script>
	</head>
	<body>

		<div class="home-menu">
			<div class="home-icon-con">
				<a class="home-menu-icon" href="/about.html">Ray</a>
				<a class="home-follow" href="#" title="Contact Me">+</a>
			</div>
			<div class="home-contact">
				<a href="http://weibo.com/1823913804" target="_blank" style="text-align: center">
					<img src="/images/weibo.ico" alt="" width="25"/></a>
				<a href="http://www.github.com/aartisan" target="_blank" style="text-align: center">
					<img src="/images/github.ico" alt="" width="25"/></a>
				<a href="http://instagram.com/ray_vendetta" target="_blank" style="text-align: center">
					<img src="/images/instagram.ico" alt="" width="25"/></a>
			</div>
		</div>

		<link rel="stylesheet" href="/js/prettify/prettify.css" />
<style type="text/css">
  body { background:#e8e8e8; }
  @media screen and (max-width: 750px){
    body { background:#fff; }
  }
  @media screen and (max-width: 1020px){
    body { background:#fff; }
  }
</style>

<div id="content">
  <div class="entry">
    <h1 class="entry-title"><a href="/code/Tail_Recursion" title="尾递归浅析">尾递归浅析</a></h1>
    <p class="entry-date">2013-12-26</p>
    <p>在学一些函数式语言的时候，经常遇到尾递归。总结一下:  </p>

<h2>什么是尾递归</h2>

<p>递归是指一个函数直接或者间接调用其本身。递归会造成什么问题呢，每次函数调用，肯定需要一个方法栈来保存相关信息的。如果递归深度太深的话，必然导致栈溢出。举一个例子，斐波那契函数吧</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">public int fib(int n)
{
    if(n&lt;2){
        return n;
    }
    return fib(n-1)+fib(n-2);
}
</code></pre></div>
<p>上面代码就是传统的递归.如果n太大，就可能导致栈溢出了。用尾递归来实现：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">public int fib(int n,int acc1,int acc2)
{
    if(n==0) {
        return acc1;
    }
    return fib(n-1,acc2,acc1+acc2);
}
</code></pre></div>
<h2>尾递归的本质是</h2>

<p>将单次计算的结果缓存起来，传递给下次调用，相当于自动累积。</p>

<h2>尾递归的优化</h2>

<p>很多人可能会有疑问，为什么尾递归也是递归，却不会造成栈溢出呢？因为编译器通常都会对尾递归进行优化。编译器会发现根本没有必要存储栈信息了，因而会在函数尾直接清空相关的栈。</p>


    <div id="disqus_container">
      <div style="margin-bottom:20px" class="right">
        <script type="text/javascript" charset="utf-8">
          (function(){
            var _w = 86 , _h = 16;
            var param = {
              url:location.href,
              type:'6',
              count:'', /**是否显示分享数，1显示(可选)*/
              appkey:'', /**您申请的应用appkey,显示分享来源(可选)*/
              title:'', /**分享的文字内容(可选，默认为所在页面的title)*/
              pic:'', /**分享图片的路径(可选)*/
              ralateUid:'1823913804', /**关联用户的UID，分享微博会@该用户(可选)*/
              language:'zh_cn', /**设置语言，zh_cn|zh_tw(可选)*/
              rnd:new Date().valueOf()
            }
            var temp = [];
            for( var p in param ){
              temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )
            }
            document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')
          })()
        </script>
      </div>
      <a href="#" class="comment" onclick="return false;">点击查看评论</a>
      <div id="disqus_thread"></div>
    </div>
  </div>

  <div class="sidenav">
    <iframe width="100%" height="75" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=zh_cn&width=0&height=550&fansRow=2&ptype=1&speed=0&skin=1&isTitle=0&noborder=0&isWeibo=0&isFans=0&uid=1823913804&verifier=b193b9de&dpc=1"></iframe>
  </div>

  <div class="sidenav">
    <h2>Code</h2>
    <ul class="artical-list">
      
      <li><a href="/code/git-flow">Git Flow</a></li>
      
      <li><a href="/code/vpn-routes">VPN Routes设置 让国内网站速度快点</a></li>
      
      <li><a href="/code/Tail_Recursion">尾递归浅析</a></li>
      
      <li><a href="/code/learn-ruby">Ruby的<=>运算符</a></li>
      
      <li><a href="/code/hhkb-professional-2-type-s">HHKB Professional 2 Type S</a></li>
      
      <li><a href="/code/learn_golang">Go在谷歌：以软件工程为目的的语言设计</a></li>
      
      <li><a href="/code/setup">起航:   jekyll编写博客</a></li>
      
    </ul>

    <h2>Life</h2>
    <ul class="artical-list">
      
      <li><a href="/life/notitle">无题</a></li>
      
      <li><a href="/life/officer">官人来访(Officer)</a></li>
      
      <li><a href="/life/ugly">Ugly Notice</a></li>
      
      <li><a href="/life/Youth">Youth</a></li>
      
      <li><a href="/life/International-labor-day">International Labor Day</a></li>
      
      <li><a href="/life/Earthquake">Earthquake</a></li>
      
    </ul>

    <h2>Project</h2>
    <ul class="artical-list">
      
    </ul>
  </div>
</div>

<script src="/js/post.js" type="text/javascript"></script>


		<!--*********************************************************-->
		<!--****** 宝贝儿，看见这个时候，删掉下面的统计代码哦~ ******-->
		<!--************* 再推荐下我的第一篇博客哦~~ ****************-->
		<!--*********************************************************-->

		<!--<div class="hide">-->
			<!--<script type="text/javascript" src="http://js.tongji.linezing.com/2727758/tongji.js"></script>-->
			<!--<noscript><a href="http://www.linezing.com"><img src="http://img.tongji.linezing.com/2727758/tongji.gif"/></a></noscript>-->
			<!--</div>-->

		<script type="text/javascript">
			$(function(){
				$('.home-follow').click(function(e){
					e.preventDefault();
					if($('.home-contact').is(':visible')){
						$('.home-contact').slideUp(100);
					}else{
						$('.home-contact').slideDown(100);
					}
				});
			})
		</script>
	</body>
</html>
